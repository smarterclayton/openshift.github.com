<!DOCTYPE html>
<!--[if lt IE 7]> <html class="ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 no-js" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class='no-js' lang='en'>
<!--<![endif]-->
<head>
  <title>OpenShift Origin - geard</title>
  <link rel="icon" type="image/png" href="../images/favicon.png" />
    <link media="all" rel="stylesheet" href="../css/font-awesome.min.css" type="text/css" />
    <link media="all" rel="stylesheet" href="../css/origin.css" type="text/css" />
    <script src="../scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="../scripts/jquery.fittext.js" type="text/javascript"></script>
    <style>
    #try { background-color: #f2f2f2; }
    section { padding-top: 20px; padding-bottom: 20px; margin-bottom: 0px; }
    #about p { margin-bottom: 40px; }
    a.btn.btn-outline-inverse{ color: white; border-color: white; }
    a.btn.btn-outline-inverse:hover, a.btn.btn-outline-inverse:focus { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="jumbotron" style="color: white;">
      <div class="container" style="position: relative">
        <!--<div class="pull-right text-center hidden">
          <div>Works with</div>
          <a href="https://projectatomic.io"><img src="http://www.projectatomic.io/images/logo.svg"></a>
        </div>-->

        <h1><a href="index.html" style="color:white;"><span>GEAR</span><span style="color: red">D</span></a></h1>
      </div>
    </div>
  <section id="about"><div class="container">
        <header>
            <h2>Distribute and deploy containers faster with geard!</h2>
        </header>
        With a single gear command you can:
        <ul>
          <li>Deploy any number of instances of your app's components</li>
          <li>Automatically allocate public ports for your apps</li>
          <li>Remove the need for endpoint configuration by simulating default port connections between components</li>
        </ul>

        It's as easy as <code>gear deploy my_deploy.json</code>
        <h3>An example in action &#8594; MongoDB and RockMongo</h3>
        <div class="row">
          <div class="col-md-7">
            <p>With one command we are going to deploy a container running MongoDB, and another container running RockMongo.  Without any environment variables or non-default config files these two separate containers will be communicating as soon as they start.</p>
            <h4>What you'll see running a gear deploy</h4>
            <pre style="display: inline-block;">
[root@localhost geard]# gear deploy rockmongo_mongo.json
2014/04/11 13:09:58 Deploying rockmongo_mongo.json.20140411-130958
2014/04/11 13:09:58 ports: Releasing 
2014/04/11 13:09:58 systemd: Reloading daemon
local PortMapping: 80 -> 6060
local Container rockmongo-1 is installed
2014/04/11 13:09:58 ports: searching block 41, 4000-4099
2014/04/11 13:09:58 ports: Reserved port 4000
2014/04/11 13:09:58 ports: Releasing 
2014/04/11 13:09:58 systemd: Reloading daemon
local PortMapping: 27017 -> 4000
local Container mongodb-1 is installed
linking rockmongo: 127.0.0.1:27017 -> localhost:4000
local Links set on local
local Container rockmongo-1 starting
local Container mongodb-1 starting</pre>
          </div>
          <div class="col-md-5">
          <h4>What a deployment JSON looks like</h4>
          <p>Below is an example telling geard what we want to deploy, and how things should be connected.</p>
            <pre>
{
  "containers":[
    {
      "name":"rockmongo",
      "count":1,
      "image":"ccoleman/rockmongo",
      "publicports":[{"internal":80,"external":6060}],
      "links":[{"to":"mongodb"}]
    },
    {
      "name":"mongodb",
      "count":1,
      "image":"dockerfile/mongodb",
      "publicports":[{"internal":27017}]
    }
  ]
}</pre>
          </div>
        </div>
        <div class="row">
          <div class="col-md-7">        
            <h3>Deploying multiple instances</h3>
            <p>If you take a look at our example JSON above, you'll see we told geard that we wanted a single instance (count=1) of RockMongo named "rockmongo" and a single instance of MongoDB named "mongodb".  When gear deploy runs this will create two containers named rockmongo-1 and mongodb-1.</p>
          </div>
          <div class="col-md-5">
            IMAGE GOES HERE
          </div>
        </div>
        <div class="row">
          <div class="col-md-7">        
            <h3>Port allocation</h3>
            <h4>Requesting specific ports</h4>
            <p>If you need to know ahead of time which external ports the apps in your containers are running on, then you can choose to include that in the deployment JSON.  In this case we specified that RockMongo needed to be exposed to external traffic on port 6060.</p>
            <h4>Automatic allocation</h4>
            <p>If you don't need to choose a specific port, but do need traffic to flow into the container, then a port is automatically allocated for it during the deploy.  For MongoDB it did not matter what port was exposed because all traffic was going to be flowing from RockMongo directly to MongoDB.  We only cared that some port was mapped to the default listening port of 27017.</p>
          </div>
          <div class="col-md-5">
            IMAGE GOES HERE
          </div>
        </div>
        <div class="row">
          <div class="col-md-7">        
            <h3>Simplified service discovery</h3>
            <p>You can spend less time coding logic to support service discovery, and instead let your applications assume standard defaults.  geard uses iptables to simplify linking network services among containers and across hosts. In our example, RockMongo communicated to MongoDB as if it were running locally at 127.0.0.1:27017.  The deployment JSON specified this with the link directive.  Under the hood, <code>geard deploy</code> enabled localnet routing and IP forwarding in the network namespace of the container.  Then iptables NAT rules were added to forward the traffic to the remote endpoint.  In the end, your web app thinks the data tier is co-located even if they are in separate containers on separate hosts.</p>
          </div>
          <div class="col-md-5">
            IMAGE GOES HERE            
          </div>
        </div>


    </div></section>

    <section id="try"><div class="container">
        <a name="download"></a>
        <header>
            <h2>Try it out</h2>
        </header>

        <p>You will need <a href="index.html">geard</a> installed to get started.  Then just download the <a href="https://github.com/openshift/geard/blob/master/deployment/fixtures/rockmongo_mongo.json">rockmongo_mongo.json</a> example and run the deploy command. The first time you run the deploy command it will download docker images from <a href="http://index.docker.io">index.docker.io</a>.  To check if the images are finished downloading, run <code>docker images</code> and check for ccoleman/rockmongo and ccoleman/ubuntu-mongodb.  Once the images appear in the list, run <code>docker ps</code> to see your RockMongo and MongoDB containers running.</p>
        </div>
        </section>
    <section><div class="container">
        <p>Once you see the containers rockmongo-1 and mongodb-1 running, then you can do things like:</p>
        <h4>Show the status of a container</h4>
        <pre>gear status rockmongo-1</pre>
        <h4>List status of all containers</h4>
        <pre>gear list-units</pre>
        <h4>Start or Stop a container</h4>
        <pre>
gear stop rockmongo-1
gear start rockmongo-1</pre>
        <h4>View logs via journalctl</h4>
        <pre>journalctl -u ctr-rockmongo-1</pre>
    </div></section>

  <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-40375612-1']);
        _gaq.push(['_setDomainName', 'openshift.github.io']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        $(document).ready(function() {
            _gaq.push(function() {
        $('a[href^="http"]').on("click", function(e) {
          e.preventDefault();
          var link = $(this).attr("href");
          _gaq.push(["_trackEvent", "Outbound Links", "click", link]);
          setTimeout('document.location = "' + link + '"', 100);
        });
      });
        });

  </script>
  <!-- Google Code for Remarketing -->
  <script type="text/javascript">
  /* <![CDATA[ */
  var google_conversion_id = 1007064360;
  var google_conversion_label = "7jfmCMC5ugQQqKqa4AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
  /* ]]> */
  </script>
  <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
  </script>
  <noscript>
  <div style="display:inline;">
  <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1007064360/?value=0&amp;label=7jfmCMC5ugQQqKqa4AM&amp;guid=ON&amp;script=0"/>
  </div>
  </noscript>
  <!-- Google+ Community -->
  <script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
  </script>
</body>
</html>
